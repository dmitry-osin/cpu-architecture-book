# Глава 5: Память и процессор

## Иерархия памяти: от регистров до жесткого диска

Компьютерная память организована в виде иерархии, где каждый уровень отличается скоростью доступа, объемом и стоимостью. Чем ближе память к процессору, тем она быстрее, но меньше по объему и дороже. Эта организация позволяет достичь хорошего баланса между скоростью работы и объемом хранимых данных.

### Уровни иерархии памяти

#### 1. Регистры процессора

**Регистры** — это самый быстрый тип памяти, расположенный непосредственно внутри процессора.

**Характеристики:**
- **Скорость доступа:** менее 1 наносекунды (10^-9 секунды)
- **Объем:** очень маленький (обычно несколько десятков или сотен байт)
- **Управление:** полностью контролируются программистом или компилятором

**Аналогия:** Регистры можно сравнить с карманами вашей одежды. В них помещается совсем немного вещей, но зато эти вещи всегда под рукой и вы можете достать их мгновенно.

#### 2. Кэш-память процессора

**Кэш-память** — это быстрая память, расположенная внутри процессора или рядом с ним, которая хранит копии часто используемых данных из оперативной памяти.

**Характеристики:**
- **Уровни:** обычно L1 (самый быстрый), L2 и L3 (более медленные, но большего объема)
- **Скорость доступа:** L1: 1-2 наносекунды, L2: 3-10 наносекунд, L3: 10-20 наносекунд
- **Объем:** L1: десятки или сотни килобайт, L2: сотни килобайт или мегабайты, L3: несколько мегабайт или десятки мегабайт
- **Управление:** автоматическое (аппаратное)

**Аналогия:** Кэш-память похожа на небольшой блокнот, который вы держите на рабочем столе. В нем вы записываете информацию, которая часто вам требуется, чтобы не ходить каждый раз в архив (оперативную память).

#### 3. Оперативная память (RAM)

**Оперативная память** — это основная рабочая память компьютера, где хранятся выполняемые программы и их данные.

**Характеристики:**
- **Скорость доступа:** 50-100 наносекунд
- **Объем:** гигабайты (обычно от 4 до 64 ГБ в современных компьютерах)
- **Энергозависимость:** при выключении питания данные теряются
- **Управление:** операционной системой

**Аналогия:** Оперативную память можно сравнить с рабочим столом. На нем достаточно места для множества документов, с которыми вы работаете прямо сейчас, но когда вы уходите (выключаете компьютер), стол очищается.

#### 4. Твердотельные накопители (SSD)

**SSD** — это энергонезависимая память, которая хранит данные даже при выключении питания и обеспечивает относительно быстрый доступ.

**Характеристики:**
- **Скорость доступа:** микросекунды (10^-6 секунды)
- **Объем:** сотни гигабайт или терабайты
- **Энергонезависимость:** данные сохраняются при выключении питания
- **Управление:** файловой системой

**Аналогия:** SSD похож на картотечный шкаф, расположенный в вашем кабинете. Чтобы достать документ, нужно встать, подойти к шкафу и найти нужную папку — это занимает больше времени, чем взять документ со стола, но шкаф вмещает гораздо больше документов, и они остаются там, даже когда вы уходите.

#### 5. Жесткие диски (HDD)

**HDD** — это традиционные механические накопители с вращающимися дисками и магнитным способом хранения данных.

**Характеристики:**
- **Скорость доступа:** миллисекунды (10^-3 секунды)
- **Объем:** терабайты
- **Энергонезависимость:** данные сохраняются при выключении питания
- **Управление:** файловой системой

**Аналогия:** HDD можно сравнить с архивом в подвале здания. Чтобы получить документ, нужно спуститься в подвал, найти нужную полку и папку. Это занимает значительное время, но в архиве можно хранить огромное количество документов.

#### 6. Внешние накопители и сетевые хранилища

**Внешние накопители** (внешние HDD, флеш-накопители) и **сетевые хранилища** (NAS, облачные хранилища) представляют самый нижний уровень иерархии.

**Характеристики:**
- **Скорость доступа:** от миллисекунд до секунд (зависит от типа подключения и сети)
- **Объем:** от гигабайт до петабайт
- **Управление:** файловой системой и сетевыми протоколами

**Аналогия:** Это как документы, хранящиеся в другом здании или даже городе. Чтобы получить их, нужно сделать запрос и подождать, пока документы доставят.

### Принцип локальности

Иерархия памяти эффективна благодаря **принципу локальности**, который заключается в том, что программы обычно обращаются к ограниченному набору данных в течение короткого периода времени:

- **Временная локальность:** если программа обратилась к определенным данным, вероятно, она обратится к ним снова в ближайшем будущем
- **Пространственная локальность:** если программа обратилась к определенным данным, вероятно, она скоро обратится к данным, расположенным рядом в памяти

**Аналогия:** Когда вы готовите обед, вы достаете из холодильника не все продукты сразу, а только те, которые нужны для текущего блюда. И часто, если вы использовали какой-то ингредиент, вы будете использовать его снова в ближайшее время.

## Кэш-память: зачем нужна и как работает

### Проблема разрыва в скорости

Процессоры развиваются быстрее, чем оперативная память. Современные процессоры могут выполнять миллиарды операций в секунду, но доступ к оперативной памяти занимает десятки или сотни тактов процессора. Это создает "узкое горлышко" в производительности компьютера.

**Аналогия:** Представьте, что вы очень быстро читаете, но каждый раз, когда нужно перевернуть страницу, вам приходится ждать несколько секунд. Ваша скорость чтения будет ограничена не тем, как быстро вы можете читать, а тем, как быстро вы можете переворачивать страницы.

### Роль кэш-памяти

Кэш-память решает проблему разрыва в скорости, предоставляя небольшой объем очень быстрой памяти, которая хранит копии данных из оперативной памяти, к которым процессор обращается наиболее часто.

**Аналогия:** Это как если бы вы, читая книгу, делали копии наиболее важных страниц и держали их под рукой, чтобы не листать всю книгу каждый раз, когда нужно перечитать важный фрагмент.

### Уровни кэш-памяти

Современные процессоры обычно имеют несколько уровней кэш-памяти:

- **Кэш L1** — самый быстрый, но самый маленький. Обычно разделен на кэш инструкций (I-cache) и кэш данных (D-cache).
- **Кэш L2** — больше, но немного медленнее L1.
- **Кэш L3** — еще больше и медленнее, но все равно намного быстрее оперативной памяти. Часто является общим для всех ядер процессора.

**Аналогия:** Это как система хранения документов: самые важные документы (L1) лежат прямо на столе, менее важные (L2) — в ящике стола, еще менее важные (L3) — в шкафу рядом со столом, а все остальные (оперативная память) — в архиве в другой комнате.

### Как работает кэш-память

#### Организация кэша

Кэш-память организована в виде **строк** (cache lines) — блоков данных фиксированного размера (обычно 64 байта). Когда процессор обращается к определенному адресу в памяти, в кэш загружается не только запрошенный байт, но и вся строка, содержащая этот адрес.

**Аналогия:** Это как если бы вы, придя в библиотеку за конкретной страницей книги, взяли бы с собой не только эту страницу, но и несколько соседних, предполагая, что они вам тоже скоро понадобятся.

#### Алгоритм работы кэша

1. **Проверка наличия данных в кэше:**
   - Процессор запрашивает данные по определенному адресу
   - Контроллер кэша проверяет, есть ли эти данные в кэше

2. **Кэш-попадание (cache hit):**
   - Если данные найдены в кэше, они немедленно передаются процессору
   - Это самый быстрый сценарий

3. **Кэш-промах (cache miss):**
   - Если данных нет в кэше, они загружаются из оперативной памяти
   - Загружается не только запрошенный байт, но и вся строка кэша
   - Данные передаются процессору и сохраняются в кэше для будущих обращений

**Аналогия:** Представьте, что вы готовите по рецепту. Сначала вы проверяете, есть ли нужный ингредиент на столе (кэш). Если есть (кэш-попадание), вы сразу используете его. Если нет (кэш-промах), вы идете в кладовую (оперативную память), берете ингредиент и приносите его на стол, чтобы он был под рукой, если понадобится снова.

#### Политики замещения

Когда кэш заполнен и нужно загрузить новую строку, необходимо решить, какую из существующих строк удалить. Для этого используются различные **политики замещения**:

- **LRU (Least Recently Used)** — удаляется строка, к которой дольше всего не обращались
- **FIFO (First In, First Out)** — удаляется строка, которая была загружена первой
- **Random** — удаляется случайная строка

**Аналогия:** Это как решение, какую книгу убрать с полки, когда места не хватает: можно убрать ту, которую дольше всего не читали (LRU), или ту, которая стоит на полке дольше всех (FIFO), или выбрать случайную книгу (Random).

#### Согласованность кэшей

В многоядерных процессорах каждое ядро может иметь свой кэш, что создает проблему **согласованности кэшей** — ситуацию, когда одни и те же данные из оперативной памяти могут быть скопированы в кэши разных ядер, и если одно ядро изменит данные, другие ядра могут работать с устаревшей копией.

Для решения этой проблемы используются **протоколы согласованности кэшей**, такие как MESI (Modified, Exclusive, Shared, Invalid), которые отслеживают состояние каждой строки кэша и обеспечивают синхронизацию между кэшами разных ядер.

**Аналогия:** Представьте, что несколько человек работают с копиями одного документа. Протокол согласованности — это как система уведомлений, которая сообщает всем, когда кто-то внес изменения в свою копию, чтобы остальные могли обновить свои копии или знали, что их копии устарели.

## Оперативная память и ее взаимодействие с процессором

### Что такое оперативная память

**Оперативная память** (Random Access Memory, RAM) — это основная рабочая память компьютера, которая хранит данные и программы, с которыми процессор работает в данный момент.

Основные характеристики оперативной памяти:
- **Энергозависимость:** данные сохраняются только при наличии электропитания
- **Произвольный доступ:** время доступа к любой ячейке памяти одинаково
- **Большой объем:** по сравнению с кэшем и регистрами
- **Относительно высокая скорость:** по сравнению с внешними накопителями

**Аналогия:** Оперативную память можно сравнить с большим рабочим столом, где разложены все документы, с которыми вы работаете в данный момент. Когда вы выключаете свет и уходите (выключаете компьютер), все документы убираются.

### Типы оперативной памяти

#### DRAM (Dynamic RAM)

**DRAM** — основной тип памяти, используемый в качестве оперативной памяти компьютеров. В ней информация хранится в виде заряда в конденсаторах, который со временем рассеивается, поэтому требуется периодическое обновление (регенерация).

**Характеристики:**
- Более дешевая и компактная, чем SRAM
- Требует регенерации (обычно каждые несколько миллисекунд)
- Более медленная, чем SRAM
- Используется для основной оперативной памяти

#### SRAM (Static RAM)

**SRAM** хранит информацию в виде состояния триггеров (flip-flops) и не требует регенерации, пока есть питание.

**Характеристики:**
- Более быстрая, чем DRAM
- Не требует регенерации
- Более дорогая и занимает больше места
- Используется для кэш-памяти

**Аналогия:** DRAM можно сравнить с доской, на которой вы пишете мелом — информация постепенно стирается и требует обновления. SRAM похожа на доску с переключателями — пока есть питание, положение переключателей не меняется.

### Организация оперативной памяти

#### Физическая организация

Оперативная память организована в виде модулей (DIMM — Dual In-line Memory Module), которые устанавливаются в специальные слоты на материнской плате. Каждый модуль содержит несколько микросхем памяти.

Внутри каждой микросхемы память организована в виде матрицы ячеек, расположенных в строках и столбцах. Доступ к конкретной ячейке осуществляется путем выбора соответствующей строки и столбца.

**Аналогия:** Это похоже на большую таблицу, где каждая ячейка имеет свой адрес, состоящий из номера строки и номера столбца.

#### Логическая организация

С точки зрения процессора, оперативная память представляет собой непрерывное адресное пространство, где каждый байт имеет уникальный адрес. Процессор не знает о физической организации памяти — этим занимается контроллер памяти.

**Аналогия:** Для процессора память — это как длинная лента с пронумерованными ячейками, хотя физически она может быть организована совсем иначе.

### Взаимодействие процессора с оперативной памятью

#### Контроллер памяти

**Контроллер памяти** — это устройство, которое управляет обменом данными между процессором и оперативной памятью. В современных компьютерах контроллер памяти обычно интегрирован в процессор или чипсет материнской платы.

Контроллер памяти выполняет следующие функции:
- Преобразует адреса, запрашиваемые процессором, в физические адреса в памяти
- Управляет регенерацией DRAM
- Обеспечивает доступ к памяти в нужной последовательности
- Оптимизирует доступ к памяти для повышения производительности

**Аналогия:** Контроллер памяти похож на библиотекаря, который знает, где физически находится каждая книга, и может быстро найти нужную книгу по ее названию или автору.

#### Шина памяти

**Шина памяти** — это набор проводников, по которым передаются данные, адреса и управляющие сигналы между процессором (или контроллером памяти) и оперативной памятью.

Шина памяти включает:
- **Шину данных** — для передачи самих данных
- **Шину адреса** — для указания адреса в памяти
- **Шину управления** — для передачи управляющих сигналов (чтение, запись и т.д.)

**Аналогия:** Шина памяти похожа на систему конвейеров, по которым перемещаются документы между вашим столом (процессором) и архивом (оперативной памятью).

#### Операции чтения и записи

**Операция чтения:**
1. Процессор отправляет адрес ячейки памяти контроллеру памяти
2. Контроллер памяти преобразует адрес в физический адрес и отправляет его в память
3. Память возвращает данные из указанной ячейки
4. Контроллер памяти передает данные процессору

**Операция записи:**
1. Процессор отправляет адрес ячейки памяти и данные для записи контроллеру памяти
2. Контроллер памяти преобразует адрес в физический адрес и отправляет его вместе с данными в память
3. Память записывает данные в указанную ячейку
4. Память отправляет подтверждение записи

**Аналогия:** Операция чтения похожа на запрос документа из архива: вы указываете, какой документ нужен, и архивариус находит его и приносит вам. Операция записи похожа на передачу документа в архив: вы отдаете документ архивариусу и указываете, где его хранить.

## Виртуальная память для чайников

### Проблема, которую решает виртуальная память

В ранних компьютерах программы работали напрямую с физической памятью, что создавало несколько проблем:
- Программы должны были помещаться в доступную физическую память
- Несколько программ, работающих одновременно, могли мешать друг другу
- Программист должен был знать, где в памяти размещена его программа

**Виртуальная память** решает эти проблемы, создавая иллюзию большого, непрерывного адресного пространства для каждой программы, независимо от фактического размера и расположения физической памяти.

**Аналогия:** Представьте, что каждый сотрудник в офисе думает, что у него есть собственный полный архив документов, хотя на самом деле все пользуются одним общим архивом, и архивариус (операционная система) следит, чтобы никто не мешал друг другу.

### Основные концепции виртуальной памяти

#### Виртуальные адреса и физические адреса

**Виртуальный адрес** — это адрес, который видит и использует программа. Он не соответствует напрямую физическому расположению данных в памяти.

**Физический адрес** — это фактический адрес ячейки в оперативной памяти.

Преобразование виртуальных адресов в физические выполняется аппаратным устройством, называемым **блоком управления памятью** (Memory Management Unit, MMU), который обычно интегрирован в процессор.

**Аналогия:** Это похоже на почтовый адрес и фактическое местоположение. Когда вы отправляете письмо по адресу "ул. Ленина, 10", вы не знаете и не заботитесь о географических координатах этого здания. Почтовая служба (MMU) знает, как преобразовать адрес в фактическое местоположение.

#### Страницы и кадры

Виртуальная память организована в виде **страниц** — блоков фиксированного размера (обычно 4 КБ). Физическая память также разделена на блоки того же размера, называемые **кадрами** или **фреймами**.

Виртуальные страницы отображаются на физические кадры не обязательно последовательно и не обязательно все сразу. Некоторые виртуальные страницы могут быть временно выгружены на диск, если не хватает физической памяти.

**Аналогия:** Представьте, что книга (программа) разделена на главы (страницы). Вы можете читать только одну главу за раз, и не обязательно держать всю книгу на столе. Некоторые главы могут лежать в ящике стола, а другие — в шкафу, и вы достаете их по мере необходимости.

#### Таблица страниц

**Таблица страниц** — это структура данных, которая хранит соответствие между виртуальными страницами и физическими кадрами. Каждая запись в таблице содержит:
- Номер физического кадра, соответствующего виртуальной странице
- Бит присутствия (указывает, находится ли страница в физической памяти или выгружена на диск)
- Биты доступа (чтение, запись, выполнение)
- Бит модификации (указывает, была ли страница изменена)
- Другие управляющие биты

**Аналогия:** Таблица страниц похожа на оглавление книги с пометками, где физически находится каждая глава (на столе, в ящике или в шкафу), и что с ней можно делать (читать, писать, выполнять).

### Как работает виртуальная память

#### Преобразование адресов

Когда программа обращается к памяти по виртуальному адресу, происходит следующее:
1. Виртуальный адрес разделяется на номер виртуальной страницы и смещение внутри страницы
2. MMU ищет в таблице страниц запись, соответствующую номеру виртуальной страницы
3. Если страница присутствует в физической памяти (бит присутствия = 1), MMU получает номер физического кадра
4. Физический адрес формируется из номера физического кадра и смещения
5. Процессор обращается к физической памяти по этому адресу

**Аналогия:** Это похоже на поиск информации в книге: сначала вы смотрите в оглавление, чтобы найти нужную главу, затем находите страницу, на которой начинается эта глава, и, наконец, находите нужный абзац на этой странице.

#### Страничный промах

**Страничный промах** (page fault) происходит, когда программа обращается к виртуальной странице, которая в данный момент не находится в физической памяти (выгружена на диск).

Когда происходит страничный промах:
1. MMU генерирует исключение (прерывание)
2. Управление передается операционной системе
3. Операционная система находит страницу на диске
4. Если необходимо, операционная система освобождает место в физической памяти, выгружая на диск какую-то другую страницу
5. Операционная система загружает требуемую страницу с диска в физическую память
6. Операционная система обновляет таблицу страниц
7. Управление возвращается программе, и инструкция, вызвавшая страничный промах, выполняется заново

**Аналогия:** Представьте, что вы читаете книгу и хотите перейти к главе, которая сейчас не на столе, а в шкафу. Вы прерываете чтение, идете к шкафу, берете нужную главу, возможно, убирая со стола какую-то другую главу, чтобы освободить место, и затем возвращаетесь к чтению.

#### Алгоритмы замещения страниц

Когда физическая память заполнена и нужно загрузить новую страницу, операционная система должна решить, какую из существующих страниц выгрузить на диск. Для этого используются различные **алгоритмы замещения страниц**:

- **LRU (Least Recently Used)** — выгружается страница, к которой дольше всего не обращались
- **FIFO (First In, First Out)** — выгружается страница, которая была загружена первой
- **Second Chance** — модификация FIFO, где страницы, к которым недавно обращались, получают "второй шанс"
- **Clock** — эффективная аппаратная реализация алгоритма Second Chance

**Аналогия:** Это похоже на решение, какую книгу убрать с полки, когда места не хватает: можно убрать ту, которую дольше всего не читали (LRU), или ту, которая стоит на полке дольше всех (FIFO).

### Преимущества виртуальной памяти

1. **Изоляция программ:** каждая программа работает в своем виртуальном адресном пространстве и не может напрямую обращаться к памяти других программ
2. **Эффективное использование памяти:** физическая память распределяется между программами по мере необходимости
3. **Возможность запуска программ, требующих больше памяти, чем доступно физически:** неиспользуемые части программы могут быть временно выгружены на диск
4. **Упрощение программирования:** программисту не нужно заботиться о физическом расположении данных в памяти

**Аналогия:** Виртуальная память похожа на систему бронирования в отеле: каждый гость получает свой номер и не беспокоится о других гостях; отель может принять больше гостей, чем у него есть номеров, если не все гости находятся в отеле одновременно

5. **Защита памяти:** операционная система может контролировать доступ к страницам памяти, запрещая программам читать, записывать или выполнять код в определенных областях памяти
6. **Совместное использование памяти:** несколько программ могут использовать одни и те же физические страницы памяти для общих библиотек или данных
7. **Возможность перемещения программ в памяти:** операционная система может перемещать страницы программы между различными областями физической памяти без влияния на работу программы

**Аналогия:** Защита памяти похожа на ключи от разных комнат в офисе — у каждого сотрудника есть доступ только к определенным помещениям, и никто не может случайно или намеренно испортить документы в чужом кабинете.

### Недостатки виртуальной памяти

1. **Накладные расходы на преобразование адресов:** каждое обращение к памяти требует дополнительных операций для преобразования виртуального адреса в физический
2. **Расход памяти на таблицы страниц:** таблицы страниц могут занимать значительный объем памяти, особенно в 64-битных системах
3. **Снижение производительности при частых страничных промахах:** если программа активно использует больше памяти, чем доступно физически, происходит **пробуксовка** (thrashing) — состояние, когда система тратит большую часть времени на выгрузку и загрузку страниц, а не на полезную работу

**Аналогия:** Пробуксовка похожа на ситуацию, когда у вас на столе не хватает места для всех нужных документов, и вы постоянно убираете одни документы и достаете другие, тратя на это больше времени, чем на работу с ними.

### Оптимизации виртуальной памяти

#### Многоуровневые таблицы страниц

В современных системах с большим адресным пространством (особенно в 64-битных системах) таблицы страниц могут быть очень большими. Для экономии памяти используются **многоуровневые таблицы страниц**, где таблица верхнего уровня указывает на таблицы нижнего уровня, которые создаются только при необходимости.

**Аналогия:** Это похоже на организацию библиотеки, где сначала вы смотрите в каталог разделов, затем в каталог конкретного раздела, и только потом ищете нужную книгу на полке.

#### Буфер ассоциативной трансляции (TLB)

**Буфер ассоциативной трансляции** (Translation Lookaside Buffer, TLB) — это специальный кэш, который хранит недавно использованные преобразования виртуальных адресов в физические. Это позволяет избежать обращения к таблице страниц для часто используемых страниц.

**Как работает TLB:**
1. При обращении к памяти процессор сначала проверяет TLB
2. Если преобразование найдено в TLB (TLB-попадание), физический адрес получается немедленно
3. Если преобразования нет в TLB (TLB-промах), процессор обращается к таблице страниц
4. После получения физического адреса из таблицы страниц, это преобразование добавляется в TLB для будущих обращений

**Аналогия:** TLB похож на небольшой блокнот, где вы записываете номера страниц часто используемых глав книги, чтобы не искать их каждый раз в оглавлении.

#### Большие страницы

Некоторые процессоры и операционные системы поддерживают **большие страницы** (huge pages) — страницы размером в мегабайты вместо стандартных 4 КБ. Это уменьшает количество записей в таблице страниц и увеличивает эффективность TLB для программ, которые используют большие непрерывные области памяти.

**Аналогия:** Большие страницы похожи на объединение нескольких глав книги в один раздел, что упрощает навигацию, если вы часто читаете весь раздел целиком.

### Файл подкачки (своп-файл)

**Файл подкачки** (swap file) или **раздел подкачки** (swap partition) — это область на жестком диске или SSD, которая используется операционной системой для хранения выгруженных страниц виртуальной памяти.

Когда физическая память заполняется, операционная система выгружает наименее используемые страницы в файл подкачки, освобождая место для новых данных. Когда выгруженные страницы снова становятся нужны, они загружаются обратно в физическую память.

**Аналогия:** Файл подкачки похож на дополнительный шкаф для хранения документов, которые не помещаются на рабочем столе, но могут понадобиться в будущем.

### Виртуальная память в современных операционных системах

#### Windows

В Windows виртуальная память настраивается через параметры производительности в свойствах системы. Пользователь может установить фиксированный или динамический размер файла подкачки (pagefile.sys).

Windows использует комбинацию алгоритмов для замещения страниц, включая модифицированные версии LRU и алгоритма рабочего набора (working set algorithm).

#### Linux

В Linux виртуальная память тесно интегрирована с файловой системой через механизм **страничного кэша** (page cache). Файл подкачки может быть реализован как отдельный раздел диска (swap partition) или как файл в файловой системе (swap file).

Linux использует алгоритм замещения страниц, основанный на двух списках: активном и неактивном, что позволяет эффективно идентифицировать страницы, которые не использовались длительное время.

#### macOS

В macOS виртуальная память работает автоматически, и пользователю обычно не нужно ее настраивать. Система динамически управляет файлом подкачки, создавая и удаляя своп-файлы по мере необходимости.

macOS использует алгоритм замещения страниц, основанный на концепции рабочего набора и истории использования страниц.

**Аналогия:** Различные подходы операционных систем к управлению виртуальной памятью похожи на разные стратегии организации рабочего пространства: кто-то предпочитает четкую структуру с фиксированными местами для всего, кто-то — более гибкий подход с динамическим распределением пространства в зависимости от текущих задач.

## Глоссарий терминов

- **Иерархия памяти** — организация различных типов памяти компьютера по скорости доступа, объему и стоимости.
- **Регистры** — самый быстрый тип памяти, расположенный непосредственно в процессоре.
- **Кэш-память** — быстрая память, расположенная между процессором и оперативной памятью, хранящая копии часто используемых данных.
- **Строка кэша** — минимальный блок данных, которым оперирует кэш-память (обычно 64 байта).
- **Кэш-попадание** — ситуация, когда запрошенные данные найдены в кэше.
- **Кэш-промах** — ситуация, когда запрошенных данных нет в кэше, и их нужно загрузить из более медленной памяти.
- **Политика замещения** — алгоритм, определяющий, какие данные удалять из кэша при его заполнении.
- **Оперативная память (RAM)** — основная рабочая память компьютера, энергозависимая и относительно быстрая.
- **DRAM** — динамическая оперативная память, требующая периодической регенерации.
- **SRAM** — статическая оперативная память, не требующая регенерации, используемая в кэшах.
- **Контроллер памяти** — устройство, управляющее обменом данными между процессором и оперативной памятью.
- **Виртуальная память** — механизм, создающий иллюзию большого, непрерывного адресного пространства для каждой программы.
- **Виртуальный адрес** — адрес в виртуальном адресном пространстве программы.
- **Физический адрес** — фактический адрес в оперативной памяти.
- **Страница** — блок фиксированного размера в виртуальной памяти (обычно 4 КБ).
- **Кадр (фрейм)** — блок того же размера в физической памяти.
- **Таблица страниц** — структура данных, хранящая соответствие между виртуальными страницами и физическими кадрами.
- **Страничный промах** — ситуация, когда программа обращается к виртуальной странице, которой нет в физической памяти.
- **Пробуксовка** — состояние, когда система тратит большую часть времени на выгрузку и загрузку страниц.
- **Буфер ассоциативной трансляции (TLB)** — кэш, хранящий недавно использованные преобразования виртуальных адресов в физические.
- **Файл подкачки** — область на диске для хранения выгруженных страниц виртуальной памяти.

## Вопросы для самопроверки

1. Какие уровни включает в себя иерархия памяти компьютера, и как они отличаются по скорости, объему и стоимости?
2. Почему кэш-память важна для производительности компьютера, и как она решает проблему разрыва в скорости между процессором и оперативной памятью?
3. Что такое строка кэша, и почему данные загружаются в кэш блоками, а не отдельными байтами?
4. Какие политики замещения используются в кэш-памяти, и в чем их различия?
5. Чем DRAM отличается от SRAM, и где они используются в компьютере?
6. Как происходит взаимодействие процессора с оперативной памятью при операциях чтения и записи?
7. Какие проблемы решает виртуальная память, и какие преимущества она дает?
8. Как происходит преобразование виртуального адреса в физический при обращении программы к памяти?
9. Что происходит при страничном промахе, и какие алгоритмы замещения страниц используются для выбора страницы для выгрузки?
10. Что такое буфер ассоциативной трансляции (TLB), и как он ускоряет работу с виртуальной памятью?